# 工程原则

[背后的原因](https://medium.com/@SkyscannerEng/why-engineering-principles-matter-993298f7d792)

### 我们对每一项任务的成功有清晰的定义

任务的每一个阶段都有很明确的成果，我们必须在所有的细分层次清楚地知道我们何时能完成任务以及为何而做。 ”完成任务“的定义可见下：

* 任务（Task）层次：有明确的**验收准则**，包括问题描述和动机
* 小队（Squad）层次：每周交付单一的 sprint 目标（Goal）
* 目标（Goal）层次：包括策略简报和里程碑的定义，解释目标以及动机，并且包含进度的展示
* 部落（Tribe）层次：制定整个部落的方向和目标
* 公司层次：所有小目标都是公司18个月内的短期计划里的一部分

### 我们能够随时发布，每周为用户带来价值

我们通过敏捷和快速迭代，定期且可持续地交付实际的成果。我们有能力随时部署，为我们的用户尽快地创造价值。

* 当你需要紧急部署时，没有任何东西可以动摇你的信心
* 使用我们的开发赋能工具，我们可以用 slingshot 快速地完成部署，并且提供监控指标以便于我们及时响应
* 我们的服务应使用微服务和微站点框架来提供单一功能
* 专注于量化我们的工作贡献, 及时地得到客户的反馈.

### 我们用“设计评审”来评估每一项重要的改动

我们应当发挥公司里各领域专家的最大价值，利用设计评审来鼓励工程师之间的交流/学习，以提高我们产品的质量。

* 任何涉及到多个团队或服务的更改都应当被认为是重要的，但你仍可自己决定其他需要评审的内容
* 所有的重要更改都应经过设计文档的评审，并且产出一份最终的设计文档和确定的设计结果
* 我们应该更专注于系统设计和文档评审过程中的协作，而不是评审会议本身
* 设计评审的流程并不是用来争论谁的想法更合适, 而是用来分享不同人的主张.

### 我们严格遵循已定的技术标准

当我们的工程团队越来越大，我们需要保证高标准的一致性和标准性。我们开诚布公地分享我们关于使用工具以及语言的想法，保证我们可以构建正确并且健壮的工具来支持团队的扩张。从内部开源，工程师入职培训，服务所有权，自由轮岗等各个方面来支持工程师的发展。我们专注于帮助客户解决问题，而不是在各种技术选择中往复。

* 所有的新服务和功能都应该按照技术标准来开发，不要重复造轮子
* 花时间在真正的知识产权（有意义的变更）上，同时注意方便其他人理解和更改
* 标准不是一成不变的，你可以在设计评审中提出不同意见并与其他人讨论你的想法
* 了解每个产品的现况, 并且给没有达到我们标准的产品提供改进方案.

### 我们互相检查每次改动

高质量的交付需要代码评审的支持，它可以及早发现潜在的故障，提高代码质量，减少技术债并且有利于知识在团队中的分享。即使是内部项目，如若它妨碍了我们更好地支持我们的外部用户，它也应当被认为是运行在生产环境中。

* 代码遵循相关项目 Contribute.MD 文件里阐述的指导方针
* 确保每个变更足够小，以便于都能在一个小时内完成评审
* 充分利用 [SonarQube](https://confluence.skyscannertools.net/display/AIRP/Static+code+analysis+-+SonarQube) 定位未被测试覆盖的代码, 用 [Danger](https://confluence.skyscannertools.net/display/MS/Danger) 来在程序出错时终止构建
* 新代码符合[内部开源](https://confluence.skyscannertools.net/display/EN/Internal+Open+Source+Software)里提到的指导方针
* 所有配置、代码、其他改变, 都必须有相关项目所有者评审.

### 我们负责运维自己开发的产品

全面的测试覆盖能够让我们早期发现错误，包括手工测试很难发现的问题。自动化测试也应该是自成文档的。我们应该在快速交付代码的同时保证测试的覆盖度，并且尽力提高之。

* 合适的测试覆盖度的衡量标准是：任何的外部提交者都可以放心的更改你的代码
* 外部提交者也应将同样的标准应用在他的测试上
* 代码被提交到主分支之前必须经过单元测试，集成测试已经接受度测试
* [SonarQube](https://confluence.skyscannertools.net/display/AIRP/Static+code+analysis+-+SonarQube) 必须被无理由得应用来保证测试覆盖度不会降低 

### 我们将发布生产作为任务完成的标准

我们的改动在部署到面向用户的环境，也就是常说的生产环境之前不会为用户带来价值，因此我们始终将发布生产作为完成任务的基本要求。为此我们不断改进发布工具，持续提高发布的吞吐量并保证每次发布都是高度可靠且可控的。无论发布是成功还是失败，我们都要保证用户能正常地使用我们的产品。

* 给示范操作时，要在生产中进行
* 发布就会有还原的能力
* 开发更改就需要有建好合适的警惕，观察方式等等
* 以上的条件都可以很容易的做交流 

### 负责到底

为了达到我们的“世界级开发”目标, 我们以迁移到了“负责到底”的运行模式, 以此在团队的基础上建立起负责项目到底的责任感. 与此同时, 我们也要做到对游客以及我们顾客负起责任.

* 工程师的职责不只是写代码, 也需要关心开发以及产品的每个部分.
* 我们需要透明地对待每个头等项目, 24小时监控、提供技术支持
* 如果别人也在依靠你的代码或服务, 可以通过 CodeLift 来简化更新流程, 以 MR 的方式面向所有的用户.

### 我们对数据负责

数据对我们的业务至关重要，我们用和对待服务同等严谨的态度对待数据。作为数据的生产者，我们有责任保证数据的质量和数据的妥善存储。

* 我们通过数据平台获取及发布业务数据，并将数据的描述添加入[清单](https://confluence.skyscannertools.net/display/DP/Data+Catalogue)供他人使用
* 数据的一致性和高可用性同服务有着同等重要的地位，需要有充分的监控及报警机制
* 数据需要有合适的保存以供实时及长期访问
* 数据能够与其它数据相关联
* 在服务或其它数据源的更新中应该保持数据质量和数据安全不受影响
* 需要及时将数据格式变更通知消费数据的用户
* 严格遵循[数据工程准则](https://confluence.skyscannertools.net/display/DET/Data+Engineering+Standards)